<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>车机破解工具箱</title>
    <style>
        body {
            background-color: #121212;
            color: #ffffff;
            font-family: sans-serif;
            padding: 20px;
            text-align: center;
        }
        h2 { color: #00e5ff; margin-bottom: 20px; }
        .group {
            background: #1e1e1e;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .group-title {
            font-size: 14px;
            color: #888;
            margin-bottom: 10px;
            text-align: left;
        }
        button, a.btn {
            display: block;
            width: 100%;
            background-color: #333;
            color: white;
            border: 1px solid #444;
            padding: 15px 0;
            margin: 10px 0;
            font-size: 18px;
            border-radius: 8px;
            text-decoration: none;
            cursor: pointer;
            transition: background 0.2s;
        }
        button:active, a.btn:active { background-color: #00e5ff; color: #000; }
        .btn-primary { background-color: #0056b3; border-color: #004494; }
        .btn-danger { background-color: #b30000; border-color: #940000; }
        input {
            width: 90%;
            padding: 10px;
            margin-bottom: 10px;
            background: #222;
            border: 1px solid #444;
            color: #fff;
            border-radius: 5px;
        }
    </style>
</head>
<body>

    <h2>FORD SYNC+ Toolbox</h2>

    <!-- 核心破解区 -->
    <div class="group">
        <div class="group-title">核心设置 (尝试开启ADB)</div>
        <a href="intent:#Intent;action=android.settings.SETTINGS;end" class="btn btn-primary">打开 原生设置</a>
        <a href="intent:#Intent;action=android.settings.APPLICATION_DEVELOPMENT_SETTINGS;end" class="btn btn-danger">打开 开发者选项</a>
        <a href="intent:#Intent;action=android.settings.DEVICE_INFO_SETTINGS;end" class="btn">打开 关于手机 (点版本号)</a>
    </div>

    <!-- 曲线救国区 -->
    <div class="group">
        <div class="group-title">常用入口 (如果上面打不开)</div>
        <a href="intent:#Intent;action=android.settings.WIFI_SETTINGS;end" class="btn">WiFi 设置 (跳板)</a>
        <a href="intent:#Intent;action=android.settings.BLUETOOTH_SETTINGS;end" class="btn">蓝牙 设置 (跳板)</a>
        <a href="intent:#Intent;action=android.settings.MANAGE_APPLICATIONS_SETTINGS;end" class="btn">应用管理</a>
        <a href="content://com.android.externalstorage.documents/root/primary" class="btn">文件管理器 (Content协议)</a>
        <a href="file:///sdcard/" class="btn">SD卡目录 (File协议)</a>
    </div>

    <!-- 自定义测试区 -->
    <div class="group">
        <div class="group-title">自定义 Intent 测试</div>
        <input type="text" id="customIntent" placeholder="输入: android.settings.XXX" value="android.settings.DISPLAY_SETTINGS">
        <button onclick="runCustom()">执行自定义指令</button>
    </div>

    <script>
        function runCustom() {
            var action = document.getElementById('customIntent').value;
            var fullIntent = "intent:#Intent;action=" + action + ";end";
            window.location.href = fullIntent;
        }
    </script>

    <script>
function tryOpenSettings() {
    // 尝试用 window.open 强行弹窗
    window.open("intent:#Intent;action=android.settings.SETTINGS;end");
}
</script>
<a href="tel:10086">拨打电话</a>
<a href="tel:%2A%23%2A%234636%23%2A%23%2A">拨打电话*#*#4636#*#*</a>
<a href="tel:%2A%232018%23">拨打电话代码2</a>

<button onclick="tryOpenSettings()">JS强行跳转</button>

<!-- 另一种协议写法 -->
<a href="android-app://com.android.settings">尝试 android-app 协议</a>

<div class="group">
    <div class="group-title">核心突破：文件选择器漏洞</div>
    
    <!-- 普通文件上传 -->
    <p>1. 点击下方按钮，看能否弹出系统文件选择框：</p>
    <input type="file" style="font-size: 20px; padding: 20px; width: 90%;" />
    <br><br>

    <!-- 限制为图片（有时能触发不同的选择器） -->
    <p>2. 尝试图片上传通道：</p>
    <input type="file" accept="image/*" style="font-size: 20px; padding: 20px; width: 90%;" />
</div>
<div class="group">
    <div class="group-title">环境侦测</div>
    <button onclick="scanWindow()">扫描隐藏接口 (结果在下方)</button>
    <div id="log" style="text-align: left; font-size: 12px; color: #0f0; background: #000; padding: 10px; margin-top: 10px; min-height: 100px; word-break: break-all;">等待扫描...</div>
</div>

<script>
    function scanWindow() {
        var logDiv = document.getElementById('log');
        logDiv.innerHTML = "开始扫描 window 对象...<br>";
        
        var found = [];
        // 常见的安卓 WebView 注入对象特征
        var blacklist = ['window', 'self', 'document', 'name', 'location', 'customElements', 'history', 'locationbar', 'menubar', 'personalbar', 'scrollbars', 'statusbar', 'toolbar', 'status', 'closed', 'frames', 'length', 'top', 'opener', 'parent', 'frameElement', 'navigator', 'origin', 'external', 'screen', 'innerWidth', 'innerHeight', 'scrollX', 'pageXOffset', 'scrollY', 'pageYOffset', 'visualViewport', 'screenX', 'screenY', 'outerWidth', 'outerHeight', 'devicePixelRatio', 'clientInformation', 'screenLeft', 'screenTop', 'defaultStatus', 'defaultstatus', 'styleMedia', 'onanimationend', 'onanimationiteration', 'onanimationstart', 'onsearch', 'ontransitionend', 'onwebkitanimationend', 'onwebkitanimationiteration', 'onwebkitanimationstart', 'onwebkittransitionend', 'isSecureContext', 'onabort', 'onblur', 'oncancel', 'oncanplay', 'oncanplaythrough', 'onchange', 'onclick', 'onclose', 'oncontextmenu', 'oncuechange', 'ondblclick', 'ondrag', 'ondragend', 'ondragenter', 'ondragleave', 'ondragover', 'ondragstart', 'ondrop', 'ondurationchange', 'onemptied', 'onended', 'onerror', 'onfocus', 'onformdata', 'oninput', 'oninvalid', 'onkeydown', 'onkeypress', 'onkeyup', 'onload', 'onloadeddata', 'onloadedmetadata', 'onloadstart', 'onmousedown', 'onmouseenter', 'onmouseleave', 'onmousemove', 'onmouseout', 'onmouseover', 'onmouseup', 'onmousewheel', 'onpause', 'onplay', 'onplaying', 'onprogress', 'onratechange', 'onreset', 'onresize', 'onscroll', 'onseeked', 'onseeking', 'onselect', 'onstalled', 'onsubmit', 'onsuspend', 'ontimeupdate', 'ontoggle', 'onvolumechange', 'onwaiting', 'onwheel', 'onauxclick', 'ongotpointercapture', 'onlostpointercapture', 'onpointerdown', 'onpointermove', 'onpointerup', 'onpointercancel', 'onpointerover', 'onpointerout', 'onpointerenter', 'onpointerleave', 'onselectstart', 'onselectionchange', 'onanimationcancel', 'onpointerrawupdate'];

        for (var prop in window) {
            if (blacklist.indexOf(prop) === -1) {
                // 排除掉标准的 JS 对象，剩下的很可能是注入的接口
                try {
                    var type = typeof window[prop];
                    if (type === 'object' || type === 'function') {
                        found.push(prop);
                    }
                } catch(e) {}
            }
        }

        if (found.length > 0) {
            logDiv.innerHTML += "发现潜在注入接口：<br>" + found.join(", ") + "<br><br>";
            logDiv.innerHTML += "尝试深度分析...<br>";
            // 尝试打印这些对象里的方法
            found.forEach(function(objName) {
                try {
                    var obj = window[objName];
                    var methods = [];
                    for (var m in obj) {
                        methods.push(m);
                    }
                    logDiv.innerHTML += "<strong style='color:yellow'>" + objName + "</strong>: " + methods.join(", ") + "<br>---<br>";
                } catch(e) {
                    logDiv.innerHTML += objName + ": 无法读取<br>";
                }
            });
        } else {
            logDiv.innerHTML += "未发现明显的注入接口。<br>";
        }
    }
</script>

</body>
</html>
